!function(){"use strict";angular.module("musicApp",["ngAnimate","ngSanitize","ngMessages","ui.router","ui.bootstrap","musicApp.artists"])}(),function(){"use strict";angular.module("musicApp").directive("acmeNavbar",function(){return{restrict:"E",templateUrl:"app/navbar/navbar.html",scope:{creationDate:"="},controller:"NavbarController",controllerAs:"vm",bindToController:!0}}).controller("NavbarController",["moment",function(t){var a=this;a.relativeDate=t(a.creationDate).fromNow()}])}(),function(){"use strict";function t(){}angular.module("musicApp").controller("MainController",t)}(),angular.module("musicApp.artists",["ui.router"]).config(["$stateProvider",function(t){t.state("artists",{url:"/artists",templateUrl:"app/artists/artists.html",controller:"ArtistsController",controllerAs:"artists"}).state("artist",{url:"/artists/:artistId",templateUrl:"app/artists/artist.html",controller:["details",function(t){this.details=t}],controllerAs:"artist",resolve:{details:["$stateParams","artistsService",function(t,a){return a.get(t.artistId)}]}})}]),angular.module("musicApp.artists").directive("countryCode",function(){return{require:"ngModel",link:function(t,a,e,r){var s=["pl","en","us"];r.$validators.countryCode=function(t){return t?-1!==s.indexOf(t):!0}}}}),angular.module("musicApp.artists").service("artistsService",["$http",function(t){this.search=function(a){return t.get("https://api.spotify.com/v1/search",{params:a}).then(function(t){return t.data[a.type+"s"].items})},this.get=function(a){return t.get("https://api.spotify.com/v1/artists/"+a).then(function(t){return t.data})}}]),angular.module("musicApp.artists").controller("ArtistsController",["artistsService","$window",function(t,a){function e(){var t=a.localStorage.getItem("artists");return t?JSON.parse(t):void 0}var r=this;r.searchParams={type:"artist"},r.list=e(),r.search=function(e){function s(t){Object.keys(t).filter(function(t){return"$"!==t[0]}).forEach(function(a){t[a].$setDirty()})}return e.$invalid?void s(e):void t.search(r.searchParams).then(function(t){r.list=t,a.localStorage.setItem("artists",JSON.stringify(t))})}}]),angular.module("musicApp.artists").directive("artistImage",function(){return{template:'<img ng-src="{{image.source()}}"/>',scope:{artist:"="},controller:"ArtistImageController",controllerAs:"image"}}).controller("ArtistImageController",["$scope",function(t){this.source=function(){var a=t.artist.images;return a&&a.length?a[a.length-1].url:void 0}}]),function(){"use strict";function t(t){t.debug("runBlock end")}angular.module("musicApp").run(t),t.$inject=["$log"]}(),function(){"use strict";function t(t,a){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}),a.otherwise("/")}angular.module("musicApp").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("musicApp").constant("malarkey",malarkey).constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function t(t,a){t.debugEnabled(!0),a.options.timeOut=3e3,a.options.positionClass="toast-top-right",a.options.preventDuplicates=!0,a.options.progressBar=!0}angular.module("musicApp").config(t),t.$inject=["$logProvider","toastr"]}(),angular.module("musicApp").run(["$templateCache",function(t){t.put("app/artists/artist.html",'<h1 class="text-center">{{artist.details.name}}</h1><pre ng-bind="artist.details | json"></pre>'),t.put("app/artists/artists.html",'<div id="artists" class="well"><h1 class="text-center">Artists</h1><form name="searchForm" novalidate=""><div class="row"><div class="form-group col-md-4"><label for="query" class="control-label">Query</label> <input type="text" class="form-control" name="query" id="query" ng-model="artists.searchParams.q" placeholder="Enter query" required=""><ng-messages for="searchForm.query.$error" ng-show="searchForm.query.$invalid && searchForm.query.$dirty"><ng-message when="required" class="text-danger">Required field</ng-message></ng-messages></div><div class="form-group col-md-2"><label for="limit" class="control-label">Size</label> <input type="number" class="form-control" name="limit" id="limit" ng-model="artists.searchParams.limit" required="" min="1" max="50"><ng-messages for="searchForm.limit.$error" ng-show="searchForm.limit.$invalid && searchForm.limit.$dirty"><ng-message when="required" class="text-danger">Required field</ng-message><ng-message when="min" class="text-danger">Minimum value is 1</ng-message><ng-message when="max" class="text-danger">Maximum value is 50</ng-message></ng-messages></div><div class="form-group col-md-2"><label for="market" class="control-label">Market</label> <input type="text" class="form-control" name="market" id="market" ng-model="artists.searchParams.market" minlength="2" maxlength="2" country-code=""><ng-messages for="searchForm.market.$error" ng-show="searchForm.market.$invalid && searchForm.market.$dirty"><ng-message when="minlength" class="text-danger">Only 2 characters allowed</ng-message><ng-message when="maxlength" class="text-danger">Only 2 characters allowed</ng-message><ng-message when="countryCode" class="text-danger">Not a valid country code</ng-message></ng-messages></div><div class="form-group col-md-2"><label class="control-label">&nbsp;</label> <button class="btn btn-primary form-control" ng-click="artists.search(searchForm)">Search</button></div></div></form><ul class="list-group"><li class="list-group-item clearfix" ng-repeat="artist in artists.list"><a ui-sref="artist({artistId: artist.id})"><h3>{{ artist.name }}</h3><artist-image artist="artist" class="pull-right"></artist-image></a></li></ul></div>'),t.put("app/main/main.html",'<div class="jumbotron text-center"><h1>\'Allo, \'Allo!</h1><p class="lead"><img src="assets/images/yeoman.png" alt="I\'m Yeoman"><br>Always a pleasure scaffolding your apps. some change</p></div>'),t.put("app/navbar/navbar.html",'<nav id="navbar" class="navbar navbar-static-top navbar-inverse"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" ui-sref="home" ui-sref-active="active"><span class="glyphicon glyphicon-home"></span> Gulp Angular</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li><a ui-sref="artists" ui-sref-active="active">Artists</a></li></ul><ul class="nav navbar-nav navbar-right acme-navbar-text"><li>Application was created {{ vm.relativeDate }}.</li></ul></div></div></nav>')}]);